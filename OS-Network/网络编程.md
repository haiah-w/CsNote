# Socket

要进行网络通信，就需要建立网络连接，网络连接需要建立在约定的通信协议之上，如：TCP协议、UDP协议；为了能够更方便的通信，对协议进行抽象，定制接口，就形成了socket规范，封装成Socket接口，供上层开发者调用。

Socket：是传输层的协议，对上层（应用层）暴露的抽象接口；

# Socket生命周期

```shell
# 查看linux socket文档
man socket
```

1、创建Socket对象：打开一个fd文件，返回一个int，0则打开成功，-1则失败

需要三个参数，此时并未绑定地址；

```c
int socket(int domain, int type, int protocol);
```

- IP地址类型：AF_INET（IPV4）、AF_INET6（IPV6）

- 数据传输方式：SOCK_STREAM（流）、SOCK_DGRAM（报文）

- 协议：TCP、UDP

> socket()  creates  an  endpoint for communication and returns a file descriptor that refers to that endpoint.  The file descriptor returned by a successful call
> will be the lowest-numbered file descriptor not currently open for the process.
> 
> 返回未打开的编号最低的文件描述符；

2、Socket.bind()绑定端口号，并listen监听此socket；

```c
int bind(int sockfd,const struct sockaddr *addr,socklen_t addrlen);
int listen(int sockfd, int backlog);
```

传入：

- 成功返回的文件描述符；

- 一个包含绑定IP、端口的结构体sockaddr；

4、socket.accept()监听网络端口（阻塞）：

```c
 int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);
```



4、当有客户端发起建立连接请求，首先进行第一次握手：







# Epoll

由三个系统调用组成：
