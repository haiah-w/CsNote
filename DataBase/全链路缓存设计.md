# 缓存设计原则

1、由近到远，由快到慢；

2、尽量减少一个请求的链路长度，响应尽早返回；

# 客户端/浏览器缓存

场景：

1、浏览器静态资源的缓存；

2、针对特殊场景不修改的数据：

- 秒杀场景商品详情等，短时间不修改、访问频次很高的数据；

目的：

1、降低资源请求的带宽损耗；

# CDN缓存

# nginx缓存

开启nginx缓存后，请求过的数据如果尚未过期，则立即返回；

1、减轻后端流量压力；

2、缩短请求链路，降低时延，增加访问速度；

# 进程内缓存

进程内缓存，是一个服务进程可以使用的<mark>最快的缓存</mark>，特点：

- 对于服务器而言，速度最快；

- 不需要网络传输，延迟最低，不受网络环境影响；

- 内存受限，不能存储大量数据；

- 要保证分布式场景下的数据的一致性，需要专门处理，复杂度高；

需要进程缓存的场景：

- 高频率的只读数据，随应用启动而加载；

- 集群下，节点间的本地缓存一致性维护复杂度高，尽可能存放不修改的数据；

实现：

1、自定义缓存，业务强相关；有多种开源实现

- Guava

- caffeine

2、MyBatis缓存

- 一级缓存：默认开启，且必须可重复读隔离级别

- 二级缓存：默认关闭；存在问题；

# 分布式缓存

优势：

1、大数据量存储，可扩展性高；

2、数据集中，保证数据一致性的复杂度相对进程内缓存低；
