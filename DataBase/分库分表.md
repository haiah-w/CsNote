分库分表

分库分表的原因都是太大，但是这个大，有很多歌原因：

1. 用户请求太大，需要分散请求到多个服务器上；
   - 增加主机来分担请求；
2. 单库太大，单个数据库的处理能力优先，磁盘空间不足，IO瓶颈等问题，需要切分为多个小库；
   - 表太多了，**垂直切分**，切成不同的库；
3. 单表太大，索引膨胀，查询超时，需要且分为多个更小的表；
   - 单张表数据量太大，**水平切分**，把单张表的数据，分成多张表；

### 垂直拆分

1. 垂直分表
   
   一般是表中的字段过多，将不常用的字段，拆分到"扩展表"中；

2. 垂直分库
   
   一般根据业务来进行拆分，将一个数据库中的多个库，放在不同的服务器上，根据不同的业务，来选择性访问不同的服务器，分担单库的处理能力；

### 水平拆分

1. 水平分表
   
   单纯将表数据拆分，仍然放在同一个库中，对于一台机器来说，毫无意义，无法分担压力；

2. 水平分库分表
   
   将单张表的数据切分到多个服务器上去，每个服务器具有相应的库与表，只是表中数据集合不同。 水平分库分表能够有效的缓解单机和单库的性能瓶颈和压力，突破IO、连接数、硬件资源等的瓶颈。

3. 拆分原则：
   
   - 可以按照顺序拆分：从0到10000一个表，10001到20000一个表；
   - Hash取模拆分：取用户id，然后hash取模，分配到不同的数据库上；
   - 按地区拆分：比如按照华东，华南，华北这样来区分业务；
   - 按时间拆分：将6个月前，甚至一年前的数据切出去放到另外的一张表，因为随着时间流逝，这些表的数据 被查询的概率变小，所以没必要和“热数据”放在一起，这个也是“冷热数据分离”。
